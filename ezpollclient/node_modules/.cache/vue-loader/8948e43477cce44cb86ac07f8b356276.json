{"remainingRequest":"C:\\Users\\Natha\\Documents\\Development\\HTML\\ezpoll\\ezpollclient\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Natha\\Documents\\Development\\HTML\\ezpoll\\ezpollclient\\src\\components\\Question.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Natha\\Documents\\Development\\HTML\\ezpoll\\ezpollclient\\src\\components\\Question.vue","mtime":1590441940036},{"path":"C:\\Users\\Natha\\Documents\\Development\\HTML\\ezpoll\\ezpollclient\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Natha\\Documents\\Development\\HTML\\ezpoll\\ezpollclient\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Natha\\Documents\\Development\\HTML\\ezpoll\\ezpollclient\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Natha\\Documents\\Development\\HTML\\ezpoll\\ezpollclient\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Natha\\Documents\\Development\\HTML\\ezpoll\\ezpollclient\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBlenBvbGxhcGkgZnJvbSAnLi4vc2VydmljZXMvZXpwb2xsLnNlcnZpY2UnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdRdWVzdGlvbicsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNlc3Npb25fZ3VpZDogJycsDQogICAgICBxdWVzdGlvbjogbnVsbCwNCiAgICAgIGFuc3dlcnM6IFtdLA0KICAgICAgc2VsZWN0ZWRfaW5kZXg6IG51bGwsDQogICAgICByZXN1bHRfZ3VpZDogbnVsbCwNCiAgICAgIGluZm86IG51bGwsDQogICAgICBpbnRlcnZhbDogbnVsbA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhbnN3ZXJTZWxlY3RlZDogZnVuY3Rpb24oYW5zd2VyKSB7DQogICAgICB0aGlzLmFuc3dlcnMuZm9yRWFjaCgoeCwgaSkgPT4gew0KICAgICAgICB4WydDaG9zZW4nXSA9IGZhbHNlOw0KICAgICAgICBpZiAoeC5BbnN3ZXJHVUlEID09PSBhbnN3ZXIuQW5zd2VyR1VJRCkgew0KICAgICAgICAgIHhbJ0Nob3NlbiddID0gdHJ1ZTsNCiAgICAgICAgICB0aGlzLnNlbGVjdGVkX2luZGV4ID0gaTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICBlenBvbGxhcGkucG9zdFJlc3VsdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbl9ndWlkJyksIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2d1aWQnKSwNCiAgICAgICAgdGhpcy5zZWxlY3RlZF9pbmRleCA9PSBudWxsID8gbnVsbCA6IHRoaXMuYW5zd2Vyc1t0aGlzLnNlbGVjdGVkX2luZGV4XS5BbnN3ZXJHVUlELA0KICAgICAgICB0aGlzLnJlc3VsdF9ndWlkLCByZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy5yZXN1bHRfZ3VpZCA9IHJlc3BvbnNlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBzaG93UmVzdWx0czogZnVuY3Rpb24oKSB7DQogICAgICBlenBvbGxhcGkucG9zdFNob3dSZXN1bHRzKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uX2d1aWQnKSwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJfZ3VpZCcpLCB0aGlzLnF1ZXN0aW9uLlF1ZXN0aW9uR1VJRCk7DQogICAgfSwNCiAgICBuZXh0UXVlc3Rpb246IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goJ2NyZWF0ZXF1ZXN0aW9uJyk7DQogICAgfSwNCiAgICBnZXRRdWVzdGlvbjogZnVuY3Rpb24ocXVlc3Rpb25fZ3VpZCkgew0KICAgICAgcmV0dXJuIGV6cG9sbGFwaS5nZXRRdWVzdGlvbihxdWVzdGlvbl9ndWlkLCByZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZF9pbmRleCA9IG51bGw7DQogICAgICAgICAgdGhpcy5yZXN1bHRfZ3VpZCA9IG51bGw7DQogICAgICAgICAgdGhpcy5xdWVzdGlvbiA9IHJlc3BvbnNlLnF1ZXN0aW9uOw0KICAgICAgICAgIHRoaXMuYW5zd2VycyA9IHJlc3BvbnNlLmFuc3dlcnM7DQogICAgICAgICAgdGhpcy5hbnN3ZXJTZWxlY3RlZCh7fSk7DQogICAgICAgIH0pOw0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLnNlc3Npb25fZ3VpZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uX2d1aWQnKTsNCiAgICBpZiAodGhpcy5zZXNzaW9uX2d1aWQpIHsNCiAgICAgIGV6cG9sbGFwaS5nZXRTZXNzaW9uKHRoaXMuc2Vzc2lvbl9ndWlkLCBzZXNzaW9uID0+IHsNCiAgICAgICAgICB0aGlzLmdldFF1ZXN0aW9uKHNlc3Npb24uUXVlc3Rpb25HVUlEKS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICAgICAgICAgIGV6cG9sbGFwaS5nZXRSZXN1bHRTdGF0cyh0aGlzLnNlc3Npb25fZ3VpZCwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJfZ3VpZCcpLCBzdGF0cyA9PiB7DQogICAgICAgICAgICAgICAgICBjb25zdCBpc1F1ZXN0aW9uUmVzZXQgPSB0aGlzLmluZm8gJiYgdGhpcy5pbmZvLnJlc3VsdHMgJiYgc3RhdHMgJiYgIXN0YXRzLnJlc3VsdHM7DQogICAgICAgICAgICAgICAgICBjb25zdCBpc05ld1F1ZXN0aW9uID0gc3RhdHMucXVlc3Rpb25fZ3VpZCAhPT0gdGhpcy5xdWVzdGlvbi5RdWVzdGlvbkdVSUQ7DQogICAgICAgICAgICAgICAgICB0aGlzLmluZm8gPSBzdGF0czsNCiAgICAgICAgICAgICAgICAgIGlmIChpc1F1ZXN0aW9uUmVzZXQgfHwgaXNOZXdRdWVzdGlvbikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFF1ZXN0aW9uKHN0YXRzLnF1ZXN0aW9uX2d1aWQpOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5mby5yZXN1bHRzKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZm9yZXN1bHRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmluZm8ucmVzdWx0cykpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXJzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmFuc3dlcnMpKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLnJlc3VsdHMgPSBhbnN3ZXJzLm1hcChhbnN3ZXIgPT4gew0KICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZm9yZXN1bHRzYW5zd2VyID0gaW5mb3Jlc3VsdHMuZmluZCh4ID0+IHguQW5zd2VyR1VJRCA9PT0gYW5zd2VyLkFuc3dlckdVSUQpOw0KICAgICAgICAgICAgICAgICAgICAgIGFuc3dlci5BbnN3ZXJDb3VudCA9IGluZm9yZXN1bHRzYW5zd2VyID8gaW5mb3Jlc3VsdHNhbnN3ZXIuQW5zd2VyQ291bnQgOiAwOw0KICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbnN3ZXI7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSwgMjAwMCk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgIH0gZWxzZSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnbm90Zm91bmQnKTsNCiAgICB9DQogIH0sDQogIGJlZm9yZURlc3Ryb3koKSB7DQogICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTsNCiAgfQ0KfQ0K"},{"version":3,"sources":["Question.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Question.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <h1 v-if=\"question\">\r\n        {{question.Description}} ?\r\n    </h1>\r\n    <div v-if=\"!(info && info.results)\">\r\n      <div v-for=\"(answer, index) in answers\" :key=\"answer.AnswerGUID\">\r\n        <button class=\"my-button\" :class=\"{ 'btnselected': index == selected_index }\"\r\n          v-on:click=\"answerSelected(answer)\">{{answer.Description}}</button>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"info && info.participant_count\">\r\n      <h3>{{info.answers_count}} / {{info.participant_count}} participants have answered . . .</h3>\r\n      <button v-if=\"info.enable_host_btns\" v-on:click=\"showResults\">Show Results</button>\r\n    </div>\r\n    <div v-if=\"info && info.results\">\r\n      <div v-for=\"result in info.results\" :key=\"result.AnswerGUID\">\r\n        <button>\r\n          {{result.Description}}\r\n        </button>\r\n        <div>\r\n          <progress :value=\"100 * result.AnswerCount / info.responses\" max=\"100\" style=\"width:300px;\"></progress>\r\n          <div>{{Math.round(100 * result.AnswerCount / info.responses)}}% ({{result.AnswerCount}}/{{info.responses}})</div>\r\n        </div>\r\n      </div>\r\n      <button v-if=\"info.enable_host_btns\" v-on:click=\"nextQuestion\">NextQuestion</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as ezpollapi from '../services/ezpoll.service';\r\n\r\nexport default {\r\n  name: 'Question',\r\n  data() {\r\n    return {\r\n      session_guid: '',\r\n      question: null,\r\n      answers: [],\r\n      selected_index: null,\r\n      result_guid: null,\r\n      info: null,\r\n      interval: null\r\n    };\r\n  },\r\n  methods: {\r\n    answerSelected: function(answer) {\r\n      this.answers.forEach((x, i) => {\r\n        x['Chosen'] = false;\r\n        if (x.AnswerGUID === answer.AnswerGUID) {\r\n          x['Chosen'] = true;\r\n          this.selected_index = i;\r\n        }\r\n      });\r\n      ezpollapi.postResult(localStorage.getItem('session_guid'), localStorage.getItem('user_guid'),\r\n        this.selected_index == null ? null : this.answers[this.selected_index].AnswerGUID,\r\n        this.result_guid, response => {\r\n          this.result_guid = response;\r\n      });\r\n    },\r\n    showResults: function() {\r\n      ezpollapi.postShowResults(localStorage.getItem('session_guid'), localStorage.getItem('user_guid'), this.question.QuestionGUID);\r\n    },\r\n    nextQuestion: function() {\r\n      this.$router.push('createquestion');\r\n    },\r\n    getQuestion: function(question_guid) {\r\n      return ezpollapi.getQuestion(question_guid, response => {\r\n          this.selected_index = null;\r\n          this.result_guid = null;\r\n          this.question = response.question;\r\n          this.answers = response.answers;\r\n          this.answerSelected({});\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.session_guid = localStorage.getItem('session_guid');\r\n    if (this.session_guid) {\r\n      ezpollapi.getSession(this.session_guid, session => {\r\n          this.getQuestion(session.QuestionGUID).then(() => {\r\n            this.interval = setInterval(() => {\r\n              ezpollapi.getResultStats(this.session_guid, localStorage.getItem('user_guid'), stats => {\r\n                  const isQuestionReset = this.info && this.info.results && stats && !stats.results;\r\n                  const isNewQuestion = stats.question_guid !== this.question.QuestionGUID;\r\n                  this.info = stats;\r\n                  if (isQuestionReset || isNewQuestion) {\r\n                    this.getQuestion(stats.question_guid);\r\n                  }\r\n                  if (this.info.results) {\r\n                    const inforesults = JSON.parse(JSON.stringify(this.info.results));\r\n                    const answers = JSON.parse(JSON.stringify(this.answers));\r\n                    this.info.results = answers.map(answer => {\r\n                      const inforesultsanswer = inforesults.find(x => x.AnswerGUID === answer.AnswerGUID);\r\n                      answer.AnswerCount = inforesultsanswer ? inforesultsanswer.AnswerCount : 0;\r\n                      return answer;\r\n                    });\r\n                  }\r\n                });\r\n            }, 2000);\r\n          });\r\n        });\r\n    } else {\r\n      this.$router.push('notfound');\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.interval);\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.btnselected {\r\n  background-color: #AAAAAA;\r\n}\r\n</style>\r\n"]}]}