(function(e){function t(t){for(var o,r,u=t[0],a=t[1],c=t[2],d=0,f=[];d<u.length;d++)r=u[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,u=1;u<n.length;u++){var a=n[u];0!==s[a]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},s={app:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=a;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("85ec"),s=n.n(o);s.a},"0e7e":function(e,t,n){},1:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("div",{staticClass:"router-view"},[n("router-view"),n("br")],1),n("Footer")],1)},i=[],r=(n("d3b7"),n("8055")),u=n.n(r),a=u()(localStorage.getItem("api_url"));function c(e){return e||function(){}}function l(e,t){a.emit("user",e,c(t))}function d(e,t){a.emit("question",e,c(t))}function f(e){d("all",c(e))}function _(e,t){a.emit("session",e,void 0,c(t))}function g(e,t,n){var o={user_guid:e,question_guid:t};a.emit("session","new",o,c(n))}function p(e,t,n,o){var s={user_guid:t,question_guid:n,action:"next"};a.emit("session",e,s,c(o))}function v(e,t,n,o){var s={user_guid:t,question_guid:n,action:"reveal"};a.emit("session",e,s,c(o))}function h(e){a.on("stats",(function(t){return e(t)}))}function m(e,t,n,o,s){var i={user_guid:t,answer_guid:n,result_guid:o};a.emit("result",e,i,c(s))}var b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.session_guid?n("footer",[n("div",{staticClass:"left"},[n("span",[e._v("Invite Link: ")]),n("span",{staticClass:"tooltip"},[n("span",{attrs:{id:"invite-link"},on:{click:e.copyLink}},[e._v(e._s(e.getInviteLink()))]),n("span",{staticClass:"tooltiptext",attrs:{id:"myTooltip"}},[e._v("Copy to clipboard")])])])]):e._e()},w=[],I=(n("99af"),{name:"Footer",data:function(){return{session_guid:""}},methods:{getInviteLink:function(){return"".concat(window.origin,"/").concat(this.session_guid)},copyLink:function(){var e=document.createElement("textarea");e.value=this.getInviteLink(),document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove()}},mounted:function(){var e=this;setInterval((function(){return e.session_guid=localStorage.getItem("session_guid")}),100)}}),S=I,y=(n("c905"),n("2877")),x=Object(y["a"])(S,b,w,!1,null,"2b76ce9c",null),q=x.exports,O={name:"App",components:{Footer:q},mounted:function(){fetch("config.json").then((function(e){return e.json()})).then((function(e){return localStorage.setItem("api_url",e.api_url)}));var e=localStorage.getItem("user_guid");e?l(e,(function(e){return console.log(e)})):l("new",(function(e){return localStorage.setItem("user_guid",e.UserGUID)}))}},D=O,k=(n("034f"),Object(y["a"])(D,s,i,!1,null,null,null)),C=k.exports,U=n("8c4f"),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.questionTypes,(function(t){return n("div",{key:t.QuestionGUID},[n("button",{on:{click:function(n){return e.questionSelected(t)}}},[e._v(e._s(t.Description))])])})),0)},G=[],$={name:"CreateQuestion",data:function(){return{questionTypes:[]}},methods:{questionSelected:function(e){var t=this,n=localStorage.getItem("session_guid"),o=localStorage.getItem("user_guid");o?n?p(n,o,e.QuestionGUID,(function(){t.$router.push("question")})):g(o,e.QuestionGUID,(function(e){localStorage.setItem("session_guid",e.SessionGUID),t.$router.push("question")})):this.$router.push("notfound")}},mounted:function(){var e=this;f((function(t){return e.questionTypes=t}))}},A=$,Q=Object(y["a"])(A,j,G,!1,null,"175e8891",null),L=Q.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("button",{on:{click:e.btnNewPoll}},[e._v("New Poll")])])])},N=[],E={name:"Home",methods:{btnNewPoll:function(){this.$router.push("createquestion")}}},T=E,F=Object(y["a"])(T,P,N,!1,null,"5de3096b",null),J=F.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.question?n("h1",[e._v(" "+e._s(e.question.Description)+" ? ")]):e._e(),e.info&&e.info.results?e._e():n("div",e._l(e.answers,(function(t,o){return n("div",{key:t.AnswerGUID},[n("button",{staticClass:"my-button",class:{btnselected:o==e.selected_index},on:{click:function(n){return e.answerSelected(t)}}},[e._v(e._s(t.Description))])])})),0),e.info&&e.info.participant_count?n("div",[n("h3",[e._v(e._s(e.info.answers_count)+" / "+e._s(e.info.participant_count)+" participants have answered . . .")]),e.enable_host_btns?n("button",{on:{click:e.showResults}},[e._v("Show Results")]):e._e()]):e._e(),e.info&&e.info.results?n("div",[e._l(e.info.results,(function(t,o){return n("div",{key:t.AnswerGUID},[n("button",{staticClass:"my-button",class:{btnselected:o==e.selected_index}},[e._v(" "+e._s(t.Description)+" ")]),n("div",[n("progress",{staticStyle:{width:"300px"},attrs:{max:"100"},domProps:{value:100*t.AnswerCount/e.info.responses}}),n("div",[e._v(e._s(Math.round(100*t.AnswerCount/e.info.responses))+"% ("+e._s(t.AnswerCount)+"/"+e._s(e.info.responses)+")")])])])})),e.enable_host_btns?n("button",{on:{click:e.nextQuestion}},[e._v("NextQuestion")]):e._e()],2):e._e()])},B=[],R=(n("7db0"),n("4160"),n("d81d"),n("159b"),{name:"Question",data:function(){return{session_guid:"",enable_host_btns:!1,question:null,answers:[],selected_index:null,result_guid:null,info:null}},methods:{answerSelected:function(e){var t=this;this.answers.forEach((function(n,o){n["Chosen"]=!1,n.AnswerGUID===e.AnswerGUID&&(n["Chosen"]=!0,t.selected_index=o)})),m(this.session_guid,localStorage.getItem("user_guid"),null==this.selected_index?null:this.answers[this.selected_index].AnswerGUID,this.result_guid,(function(e){t.result_guid=e}))},showResults:function(){v(this.session_guid,localStorage.getItem("user_guid"),this.question.QuestionGUID)},nextQuestion:function(){this.$router.push("createquestion")},getQuestion:function(e){var t=this;return new Promise((function(n){d(e,(function(e){t.selected_index=null,t.result_guid=null,t.question=e.question,t.answers=e.answers,t.answerSelected({}),n()}))}))}},created:function(){var e=this,t=localStorage.getItem("user_guid");this.session_guid=localStorage.getItem("session_guid"),this.session_guid?(_(this.session_guid,(function(n){e.enable_host_btns=n.HostGUID===t,e.getQuestion(n.QuestionGUID).then((function(){}))})),h((function(t){console.log("stats",t);var n=e.info&&e.info.results&&t&&!t.results,o=t.question_guid!==e.question.QuestionGUID;if(e.info=t,(n||o)&&e.getQuestion(t.question_guid).then((function(){})),e.info.results){var s=JSON.parse(JSON.stringify(e.info.results)),i=JSON.parse(JSON.stringify(e.answers));e.info.results=i.map((function(e){var t=s.find((function(t){return t.AnswerGUID===e.AnswerGUID}));return e.AnswerCount=t?t.AnswerCount:0,e}))}}))):this.$router.push("notfound")}}),H=R,z=(n("c2ea"),Object(y["a"])(H,M,B,!1,null,"8f6dd5c2",null)),K=z.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading?e._e():n("h1",[e._v(" 404 ")]),e.loading?n("h1",[n("span",[e._v("loading")]),e._l(e.dots,(function(t){return n("span",{key:t},[e._v(" .")])}))],2):e._e()])},W=[],X=(n("cb29"),n("ac1f"),n("1276"),{name:"NotFound",data:function(){return{dotsinterval:null,dots:[],loading:!0}},methods:{waitForLocalStorageItem:function(e,t){var n=setInterval((function(){localStorage.getItem(e)&&(clearInterval(n),t&&t())}),100)},routeBasedOnLocalStorage:function(){var e=this;setTimeout((function(){var t=localStorage.getItem("api_url"),n=localStorage.getItem("user_guid"),o=localStorage.getItem("session_guid");t&&n&&o?e.$router.push("question"):e.$router.push("home")}),1e3)}},mounted:function(){var e=this;this.dotsinterval=setInterval((function(){e.dots=Array((e.dots.length+1)%4).fill(null)}),250);var t=this.$route.fullPath;console.log(t);var n=t.split("/");if(2==n.length&&36===n[1].length){var o=n[1];this.waitForLocalStorageItem("api_url",(function(){_(o,(function(t){t&&t.SessionGUID?localStorage.setItem("session_guid",o):localStorage.removeItem("session_guid"),e.waitForLocalStorageItem("user_guid",(function(){e.routeBasedOnLocalStorage()}))}))}))}else"/"===t?(localStorage.removeItem("session_guid"),localStorage.removeItem("user_guid"),this.routeBasedOnLocalStorage()):this.routeBasedOnLocalStorage()},beforeDestroy:function(){clearInterval(this.dotsinterval)}}),Y=X,Z=Object(y["a"])(Y,V,W,!1,null,"2d3bcdc4",null),ee=Z.exports;o["a"].use(U["a"]),o["a"].config.productionTip=!1;var te=new U["a"]({routes:[{path:"/createquestion",component:L},{path:"/home",component:J},{path:"/question",component:K},{path:"/notfound",component:ee},{path:"*",component:ee}],mode:"history"});new o["a"]({router:te,render:function(e){return e(C)}}).$mount("#app")},"597a":function(e,t,n){},"85ec":function(e,t,n){},c2ea:function(e,t,n){"use strict";var o=n("0e7e"),s=n.n(o);s.a},c905:function(e,t,n){"use strict";var o=n("597a"),s=n.n(o);s.a}});
//# sourceMappingURL=app.ab5f90c4.js.map