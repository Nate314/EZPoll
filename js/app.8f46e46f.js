(function(t){function e(e){for(var o,s,u=e[0],a=e[1],c=e[2],f=0,d=[];f<u.length;f++)s=u[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,u=1;u<n.length;u++){var a=n[u];0!==r[a]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=a;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("85ec"),r=n.n(o);r.a},"0a1e":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("Footer")],1)},i=[],s=(n("99af"),n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.session_guid?n("footer",[n("div",{staticClass:"left"},[n("span",[t._v("Invite Link: ")]),n("span",{staticClass:"tooltip"},[n("span",{attrs:{id:"invite-link"},on:{click:t.copyLink}},[t._v(t._s(t.getInviteLink()))]),n("span",{staticClass:"tooltiptext",attrs:{id:"myTooltip"}},[t._v("Copy to clipboard")])])])]):t._e()}),u=[],a={name:"Footer",data:function(){return{session_guid:""}},methods:{getInviteLink:function(){return"".concat(window.origin,"/").concat(this.session_guid)},copyLink:function(){var t=document.createElement("textarea");t.value=this.getInviteLink(),document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}},mounted:function(){var t=this;setInterval((function(){return t.session_guid=localStorage.getItem("session_guid")}),100)}},c=a,l=(n("c905"),n("2877")),f=Object(l["a"])(c,s,u,!1,null,"2b76ce9c",null),d=f.exports,g={name:"App",components:{Footer:d},mounted:function(){localStorage.setItem("api_url","http://pi.nathangawith.com:575/api");var t=localStorage.getItem("user_guid");t?fetch("".concat(localStorage.getItem("api_url"),"/user/").concat(t)).then((function(t){return t.json()})).then((function(t){return console.log(t)})):fetch("".concat(localStorage.getItem("api_url"),"/user/new")).then((function(t){return t.json()})).then((function(t){return localStorage.setItem("user_guid",t.UserGUID)}))}},p=g,_=(n("034f"),Object(l["a"])(p,r,i,!1,null,null,null)),h=_.exports,v=n("8c4f"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.questionTypes,(function(e){return n("div",{key:e.QuestionGUID},[n("button",{on:{click:function(n){return t.questionSelected(e)}}},[t._v(t._s(e.Description))])])})),0)},I=[];function w(t,e){t&&t(e)}function b(){return localStorage.getItem("api_url")}function S(t,e){return fetch("".concat(b()).concat(t)).then((function(t){return t.json()})).then((function(t){return w(e,t)}))}function y(t,e,n){var o={"Content-Type":"application/json"},r={method:"post",headers:o,body:JSON.stringify(e)};return fetch("".concat(b()).concat(t),r).then((function(t){return t.json()})).then((function(t){return w(n,t)}))}function x(t,e){return S("/question/".concat(t),e)}function q(t){return S("/question/all",t)}function O(t,e){return S("/session/".concat(t),e)}function D(t,e,n){var o={user_guid:t,question_guid:e};return y("/session/new",o,n)}function j(t,e,n,o){var r={user_guid:e,question_guid:n,action:"next"};return y("/session/".concat(t),r,o)}function k(t,e,n){return S("/result/".concat(t,"_").concat(e),n)}function U(t,e,n,o,r){var i={user_guid:e,answer_guid:n,result_guid:o};return y("/result/".concat(t),i,r)}function C(t,e,n,o){var r={user_guid:e,question_guid:n,action:"reveal"};return y("/session/".concat(t),r,o)}var G={name:"CreateQuestion",data:function(){return{questionTypes:[]}},methods:{questionSelected:function(t){var e=this,n=localStorage.getItem("session_guid"),o=localStorage.getItem("user_guid");o?n?j(n,o,t.QuestionGUID,(function(){e.$router.push("question")})):D(o,t.QuestionGUID,(function(t){localStorage.setItem("session_guid",t.SessionGUID),e.$router.push("question")})):this.$router.push("notfound")}},mounted:function(){var t=this;q((function(e){return t.questionTypes=e}))}},$=G,A=Object(l["a"])($,m,I,!1,null,"175e8891",null),Q=A.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("button",{on:{click:t.btnNewPoll}},[t._v("New Poll")])])])},P=[],N={name:"Home",methods:{btnNewPoll:function(){this.$router.push("createquestion")}}},T=N,E=Object(l["a"])(T,L,P,!1,null,"5de3096b",null),F=E.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.question?n("h1",[t._v(" "+t._s(t.question.Description)+" ? ")]):t._e(),t.info&&t.info.results?t._e():n("div",t._l(t.answers,(function(e,o){return n("div",{key:e.AnswerGUID},[n("button",{staticClass:"my-button",class:{btnselected:o==t.selected_index},on:{click:function(n){return t.answerSelected(e)}}},[t._v(t._s(e.Description))])])})),0),t.info&&t.info.participant_count?n("div",[n("h3",[t._v(t._s(t.info.answers_count)+" / "+t._s(t.info.participant_count)+" participants have answered . . .")]),t.info.enable_host_btns?n("button",{on:{click:t.showResults}},[t._v("Show Results")]):t._e()]):t._e(),t.info&&t.info.results?n("div",[t._l(t.info.results,(function(e){return n("div",{key:e.AnswerGUID},[n("button",[t._v(" "+t._s(e.Description)+" ")]),n("div",[n("progress",{staticStyle:{width:"300px"},attrs:{max:"100"},domProps:{value:100*e.AnswerCount/t.info.responses}}),n("div",[t._v(t._s(Math.round(100*e.AnswerCount/t.info.responses))+"% ("+t._s(e.AnswerCount)+"/"+t._s(t.info.responses)+")")])])])})),t.info.enable_host_btns?n("button",{on:{click:t.nextQuestion}},[t._v("NextQuestion")]):t._e()],2):t._e()])},M=[],B=(n("7db0"),n("4160"),n("d81d"),n("159b"),{name:"Question",data:function(){return{session_guid:"",question:null,answers:[],selected_index:null,result_guid:null,info:null,interval:null}},methods:{answerSelected:function(t){var e=this;this.answers.forEach((function(n,o){n["Chosen"]=!1,n.AnswerGUID===t.AnswerGUID&&(n["Chosen"]=!0,e.selected_index=o)})),U(localStorage.getItem("session_guid"),localStorage.getItem("user_guid"),null==this.selected_index?null:this.answers[this.selected_index].AnswerGUID,this.result_guid,(function(t){e.result_guid=t}))},showResults:function(){C(localStorage.getItem("session_guid"),localStorage.getItem("user_guid"),this.question.QuestionGUID)},nextQuestion:function(){this.$router.push("createquestion")},getQuestion:function(t){var e=this;return x(t,(function(t){e.selected_index=null,e.result_guid=null,e.question=t.question,e.answers=t.answers,e.answerSelected({})}))}},mounted:function(){var t=this;this.session_guid=localStorage.getItem("session_guid"),this.session_guid?O(this.session_guid,(function(e){t.getQuestion(e.QuestionGUID).then((function(){t.interval=setInterval((function(){k(t.session_guid,localStorage.getItem("user_guid"),(function(e){var n=t.info&&t.info.results&&e&&!e.results,o=e.question_guid!==t.question.QuestionGUID;if(t.info=e,(n||o)&&t.getQuestion(e.question_guid),t.info.results){var r=JSON.parse(JSON.stringify(t.info.results)),i=JSON.parse(JSON.stringify(t.answers));t.info.results=i.map((function(t){var e=r.find((function(e){return e.AnswerGUID===t.AnswerGUID}));return t.AnswerCount=e?e.AnswerCount:0,t}))}}))}),2e3)}))})):this.$router.push("notfound")},beforeDestroy:function(){clearInterval(this.interval)}}),R=B,H=(n("e584"),Object(l["a"])(R,J,M,!1,null,"abfd55c2",null)),z=H.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?t._e():n("h1",[t._v(" 404 ")]),t.loading?n("h1",[n("span",[t._v("loading")]),t._l(t.dots,(function(e){return n("span",{key:e},[t._v(" .")])}))],2):t._e()])},V=[],W=(n("cb29"),n("ac1f"),n("1276"),{name:"NotFound",data:function(){return{dotsinterval:null,dots:[],loading:!0}},methods:{waitForLocalStorageItem:function(t,e){var n=setInterval((function(){localStorage.getItem(t)&&(clearInterval(n),e&&e())}),100)},routeBasedOnLocalStorage:function(){var t=this;setTimeout((function(){var e=localStorage.getItem("api_url"),n=localStorage.getItem("user_guid"),o=localStorage.getItem("session_guid");e&&n&&o?t.$router.push("question"):t.$router.push("home")}),1e3)}},mounted:function(){var t=this;this.dotsinterval=setInterval((function(){t.dots=Array((t.dots.length+1)%4).fill(null)}),250);var e=this.$route.fullPath;console.log(e);var n=e.split("/");if(2==n.length&&36===n[1].length){var o=n[1];this.waitForLocalStorageItem("api_url",(function(){O(o,(function(e){e&&e.SessionGUID?localStorage.setItem("session_guid",o):localStorage.removeItem("session_guid"),t.waitForLocalStorageItem("user_guid",(function(){t.routeBasedOnLocalStorage()}))}))}))}else"/"===e?(localStorage.removeItem("session_guid"),localStorage.removeItem("user_guid"),this.routeBasedOnLocalStorage()):this.routeBasedOnLocalStorage()},beforeDestroy:function(){clearInterval(this.dotsinterval)}}),X=W,Y=Object(l["a"])(X,K,V,!1,null,"2d3bcdc4",null),Z=Y.exports;o["a"].use(v["a"]),o["a"].config.productionTip=!1;var tt=new v["a"]({routes:[{path:"/createquestion",component:Q},{path:"/home",component:F},{path:"/question",component:z},{path:"/notfound",component:Z},{path:"*",component:Z}],mode:"history"});new o["a"]({router:tt,render:function(t){return t(h)}}).$mount("#app")},"597a":function(t,e,n){},"85ec":function(t,e,n){},c905:function(t,e,n){"use strict";var o=n("597a"),r=n.n(o);r.a},e584:function(t,e,n){"use strict";var o=n("0a1e"),r=n.n(o);r.a}});
//# sourceMappingURL=app.8f46e46f.js.map