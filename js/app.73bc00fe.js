(function(t){function e(e){for(var o,r,u=e[0],a=e[1],c=e[2],f=0,d=[];f<u.length;f++)r=u[f],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,u=1;u<n.length;u++){var a=n[u];0!==s[a]&&(o=!1)}o&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},s={app:0},i=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=a;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("85ec"),s=n.n(o);s.a},"1bec":function(t,e,n){"use strict";var o=n("a408"),s=n.n(o);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),t.session_guid?n("footer",[n("div",{staticClass:"left"},[t._v(" Invite Link: "),n("span",{staticClass:"tooltip"},[n("span",{attrs:{id:"invite-link"},on:{click:t.copyLink}},[t._v(t._s(t.getInviteLink()))]),n("span",{staticClass:"tooltiptext",attrs:{id:"myTooltip"}},[t._v("Copy to clipboard")])])])]):t._e()],1)},i=[],r=(n("99af"),{name:"App",data:function(){return{session_guid:""}},methods:{getInviteLink:function(){return"".concat(window.origin,"/").concat(this.session_guid)},copyLink:function(){var t=document.createElement("textarea");t.value=this.getInviteLink(),document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}},mounted:function(){var t=this;setInterval((function(){return t.session_guid=localStorage.getItem("session_guid")}),100)}}),u=r,a=(n("034f"),n("2877")),c=Object(a["a"])(u,s,i,!1,null,null,null),l=c.exports,f=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.questionTypes,(function(e){return n("div",{key:e.QuestionGUID},[n("button",{on:{click:function(n){return t.questionSelected(e)}}},[t._v(t._s(e.Description))])])})),0)},p=[],h=(n("d3b7"),{name:"CreateQuestion",data:function(){return{questionTypes:[]}},methods:{questionSelected:function(t){var e=this,n=localStorage.getItem("session_guid"),o=localStorage.getItem("user_guid");o?n?fetch("".concat(localStorage.getItem("api_url"),"/session/").concat(n),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_guid:o,question_guid:t.QuestionGUID,action:"next"})}).then((function(t){return t.json()})).then((function(){e.$router.push("question")})):fetch("".concat(localStorage.getItem("api_url"),"/session/new"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_guid:o,question_guid:t.QuestionGUID})}).then((function(t){return t.json()})).then((function(t){localStorage.setItem("session_guid",t.SessionGUID),e.$router.push("question")})):this.$router.push("notfound")}},mounted:function(){var t=this;fetch("".concat(localStorage.getItem("api_url"),"/question/all")).then((function(t){return t.json()})).then((function(e){return t.questionTypes=e}))}}),g=h,_=Object(a["a"])(g,d,p,!1,null,"55b65356",null),v=_.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("button",{on:{click:t.btnNewPoll}},[t._v("New Poll")])])])},S=[],b={name:"Home",methods:{btnNewPoll:function(){this.$router.push("createquestion")},btnJoinPoll:function(){}},mounted:function(){localStorage.setItem("api_url","http://localhost:5000/api");var t=localStorage.getItem("user_guid");t?fetch("".concat(localStorage.getItem("api_url"),"/user/").concat(t)).then((function(t){return t.json()})).then((function(t){return console.log(t)})):fetch("".concat(localStorage.getItem("api_url"),"/user/new")).then((function(t){return t.json()})).then((function(t){return localStorage.setItem("user_guid",t.UserGUID)}))}},I=b,w=Object(a["a"])(I,m,S,!1,null,"2c4a40b0",null),y=w.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.question?n("h1",[t._v(" "+t._s(t.question.Description)+" ? ")]):t._e(),t.info&&t.info.results?t._e():n("div",t._l(t.answers,(function(e,o){return n("div",{key:e.AnswerGUID},[n("button",{staticClass:"my-button",class:{btnselected:o==t.selected_index},on:{click:function(n){return t.answerSelected(e)}}},[t._v(t._s(e.Description))])])})),0),t.info&&t.info.participant_count?n("div",[n("h3",[t._v(t._s(t.info.answers_count)+" / "+t._s(t.info.participant_count)+" participants have answered . . .")]),t.info.enable_host_btns?n("button",{on:{click:t.showResults}},[t._v("Show Results")]):t._e()]):t._e(),t.info&&t.info.results?n("div",[t._l(t.info.results,(function(e){return n("div",{key:e.AnswerGUID},[n("button",[t._v(" "+t._s(e.Description)+" ")]),n("div",[n("progress",{staticStyle:{width:"300px"},attrs:{max:"100"},domProps:{value:100*e.AnswerCount/t.info.responses}}),n("div",[t._v(t._s(Math.round(100*e.AnswerCount/t.info.responses))+"% ("+t._s(e.AnswerCount)+"/"+t._s(t.info.responses)+")")])])])})),t.info.enable_host_btns?n("button",{on:{click:t.nextQuestion}},[t._v("NextQuestion")]):t._e()],2):t._e()])},O=[],q=(n("7db0"),n("4160"),n("d81d"),n("159b"),{name:"Question",data:function(){return{session_guid:"",question:null,answers:[],selected_index:null,result_guid:null,info:null,interval:null}},methods:{answerSelected:function(t){var e=this;this.answers.forEach((function(n,o){n["Chosen"]=!1,n.AnswerGUID===t.AnswerGUID&&(n["Chosen"]=!0,e.selected_index=o)})),fetch("".concat(localStorage.getItem("api_url"),"/result/").concat(localStorage.getItem("session_guid")),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_guid:localStorage.getItem("user_guid"),answer_guid:null==this.selected_index?null:this.answers[this.selected_index].AnswerGUID,result_guid:this.result_guid})}).then((function(t){return t.json()})).then((function(t){e.result_guid=t}))},showResults:function(){fetch("".concat(localStorage.getItem("api_url"),"/session/").concat(localStorage.getItem("session_guid")),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_guid:localStorage.getItem("user_guid"),question_guid:this.question.QuestionGUID,action:"reveal"})}).then((function(t){return t.json()}))},nextQuestion:function(){this.$router.push("createquestion")},getQuestion:function(t){var e=this;return fetch("".concat(localStorage.getItem("api_url"),"/question/").concat(t)).then((function(t){return t.json()})).then((function(t){e.selected_index=null,e.result_guid=null,e.question=t.question,e.answers=t.answers,e.answerSelected({})}))}},mounted:function(){var t=this;this.session_guid=localStorage.getItem("session_guid"),this.session_guid?fetch("".concat(localStorage.getItem("api_url"),"/session/").concat(this.session_guid)).then((function(t){return t.json()})).then((function(e){t.getQuestion(e.QuestionGUID).then((function(){t.interval=setInterval((function(){fetch("".concat(localStorage.getItem("api_url"),"/result/").concat(t.session_guid,"_").concat(localStorage.getItem("user_guid"))).then((function(t){return t.json()})).then((function(e){var n=t.info&&t.info.results&&e&&!e.results,o=e.question_guid!==t.question.QuestionGUID;if(t.info=e,(n||o)&&t.getQuestion(e.question_guid),t.info.results){var s=JSON.parse(JSON.stringify(t.info.results)),i=JSON.parse(JSON.stringify(t.answers));t.info.results=i.map((function(t){var e=s.find((function(e){return e.AnswerGUID===t.AnswerGUID}));return t.AnswerCount=e?e.AnswerCount:0,t}))}}))}),2e3)}))})):this.$router.push("notfound")},beforeDestroy:function(){clearInterval(this.interval)}}),x=q,D=(n("1bec"),Object(a["a"])(x,j,O,!1,null,"1c3998e7",null)),k=D.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[t._v(" 404 ")])},U=[],G=(n("ac1f"),n("1276"),{name:"NotFound",mounted:function(){var t=this,e=this.$route.fullPath.split("/");if(2==e.length&&36===e[1].length){var n=e[1];fetch("".concat(localStorage.getItem("api_url"),"/session/").concat(n)).then((function(t){return t.json()})).then((function(e){console.log("-----session info-----"),e.SessionGUID?localStorage.setItem("session_guid",n):localStorage.removeItem("session_guid"),t.routeBasedOnLocalStorage()}))}else this.routeBasedOnLocalStorage()},methods:{routeBasedOnLocalStorage:function(){var t=localStorage.getItem("api_url"),e=localStorage.getItem("user_guid"),n=localStorage.getItem("session_guid");t&&e&&n?this.$router.push("question"):this.$router.push("home")}}}),$=G,Q=Object(a["a"])($,C,U,!1,null,"1a40c8d0",null),A=Q.exports;o["a"].use(f["a"]),o["a"].config.productionTip=!1;var N=new f["a"]({routes:[{path:"/createquestion",component:v},{path:"/home",component:y},{path:"/question",component:k},{path:"notfound",component:A},{path:"*",component:A}],mode:"history"});new o["a"]({router:N,render:function(t){return t(l)}}).$mount("#app")},"85ec":function(t,e,n){},a408:function(t,e,n){}});
//# sourceMappingURL=app.73bc00fe.js.map